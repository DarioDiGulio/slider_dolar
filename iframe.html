<!DOCTYPE html>
<html>
  <head>
    <!-- UIkit CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/uikit@3.6.18/dist/css/uikit.min.css"
    />
    <style>
      .text-valor {
        color: #ad8241 !important;
        margin-left: 5px;
      }

      a:link,
      a:visited,
      a:active,
      a {
        text-decoration: none !important;
        cursor: default !important;
      }

      b {
        color: #ad8241 !important;
      }

      .text-dolar {
        background-color: #e4e8d1;
        padding-left: 5px;
        color: #718176;
      }
    </style>
  </head>

  <body onload="setValues()">
    <div uk-slider id="slider">
      <div class="uk-position-relative">
        <div class="uk-slider-container uk-light">
          <ul class="test uk-slider-items">
            <li>
              <canvas width="400" height="10"></canvas>
              <p class="text-dolar">
                ðŸ’° DOLAR OFICIAL
                <a class="text-valor" id="valor-oficial">Compra </a>
                <a><b id="valor-oficial-compra"></b></a>
                <a class="text-valor" id="valor-compra">Venta</a>
                <a><b id="valor-oficial-venta"></b></a>
              </p>
            </li>
            <li>
              <canvas width="400" height="10"></canvas>
              <p class="text-dolar">
                ðŸ’° DOLAR BLUE
                <a class="text-valor" id="valor-compra">Compra </a>
                <a><b id="valor-blue-compra"></b></a>
                <a class="text-valor" id="valor-compra">Venta</a>
                <a><b id="valor-blue-venta"></b></a>
              </p>
            </li>
            <li>
              <canvas width="400" height="10"></canvas>
              <p class="text-dolar">
                ðŸ’° DOLAR BOLSA
                <a class="text-valor" id="valor-compra">Compra </a>
                <a><b id="valor-bolsa-compra"></b></a>
                <a class="text-valor" id="valor-compra">Venta</a>
                <a><b id="valor-bolsa-venta"></b></a>
              </p>
            </li>
            <li>
              <canvas width="400" height="10"></canvas>
              <p class="text-dolar">
                ðŸ’° CONTADO LIQUI
                <a class="text-valor" id="valor-compra">Compra </a>
                <a><b id="valor-liqui-compra"></b></a>
                <a class="text-valor" id="valor-compra">Venta</a>
                <a><b id="valor-liqui-venta"></b></a>
              </p>
            </li>
            <li>
              <canvas width="400" height="10"></canvas>
              <p class="text-dolar">
                ðŸ’° DOLAR PROMEDIO
                <a class="text-valor" id="valor-compra">Compra </a>
                <a><b id="valor-promedio-compra"></b></a>
                <a class="text-valor" id="valor-compra">Venta</a>
                <a><b id="valor-promedio-venta"></b></a>
              </p>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </body>

  <script>
    async function getValue(endpoint) {
      const apiURL = "https://api-dolar-argentina.herokuapp.com" + endpoint;
      const url = `https://api.allorigins.win/get?url=${encodeURIComponent(
        apiURL
      )}`;

      try {
        const response = await fetch(url, {
          headers: { "Content-Type": "application/json" },
        });
        const data = await response.json();
        return data;
      } catch (error) {
        console.log("Something went wrong " + error);
      }
    }

    async function setValues() {
      // Obtenemos los datos de la API
      const dolarOficial = await getValue("/api/dolaroficial");
      const dolarBlue = await getValue("/api/dolarblue");
      const dolarBolsa = await getValue("/api/dolarbolsa");
      const dolarLiqui = await getValue("/api/contadoliqui");
      const dolarPromedio = await getValue("/api/dolarpromedio");
      const dolarTurista = await getValue("/api/bbva");

      // Variables con los valores de Compra
      const oficialCompra = JSON.parse(dolarOficial.contents).compra;
      const blueCompra = JSON.parse(dolarBlue.contents).compra;
      const bolsaCompra = JSON.parse(dolarBolsa.contents).compra;
      const liquiCompra = JSON.parse(dolarLiqui.contents).compra;
      const promedioCompra = JSON.parse(dolarPromedio.contents).compra;

      // Variables con los valores de Venta
      const oficialVenta = JSON.parse(dolarOficial.contents).venta;
      const blueVenta = JSON.parse(dolarBlue.contents).venta;
      const bolsaVenta = JSON.parse(dolarBolsa.contents).venta;
      const liquiVenta = JSON.parse(dolarLiqui.contents).venta;
      const promedioVenta = JSON.parse(dolarPromedio.contents).venta;

      // Asignamos los valores en el HTML
      // Compra
      document.getElementById("valor-oficial-compra").innerHTML =
        "$ " + oficialCompra;
      document.getElementById("valor-blue-compra").innerHTML =
        "$ " + blueCompra;
      document.getElementById("valor-bolsa-compra").innerHTML =
        "$ " + bolsaCompra;
      document.getElementById("valor-liqui-compra").innerHTML =
        "$ " + liquiCompra;
      document.getElementById("valor-promedio-compra").innerHTML =
        "$ " + promedioCompra;

      //Venta
      document.getElementById("valor-oficial-venta").innerHTML =
        "$ " + oficialVenta;
      document.getElementById("valor-blue-venta").innerHTML = "$ " + blueVenta;
      document.getElementById("valor-bolsa-venta").innerHTML =
        "$ " + bolsaVenta;
      document.getElementById("valor-liqui-venta").innerHTML =
        "$ " + liquiVenta;
      document.getElementById("valor-promedio-venta").innerHTML =
        "$ " + promedioVenta;
    }
  </script>
  <!-- UIkit JS -->
  <script src="https://cdn.jsdelivr.net/npm/uikit@3.6.18/dist/js/uikit.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/uikit@3.6.18/dist/js/uikit-icons.min.js"></script>
  <script>
    const sliderElement = document.getElementById("slider");
    UIkit.slider(sliderElement, {
      autoplay: true,
      draggable: true,
      autoplayInterval: 0,
      velocity: 0.01,
    });
  </script>
</html>
